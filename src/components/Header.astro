---
const currentPath = Astro.url.pathname;

const isActive = (href: string) => {
    if (currentPath === href) {
        return 'active';
    }

    return '';
};
---
<header class="chaos-header">
    <nav class="chaos-nav">
        <a class={isActive('/about/')} href="/about/">[A]ABOUT</a>
        <a class={isActive('/')} href="/">[B]BLOG</a>
        <a href="https://www.linkedin.com/in/ibunnchou/" target="_blank">[L]LINKEDIN</a>
        <a href="https://github.com/ChaosBeiduo" target="_blank">[G]GITHUB</a>
    </nav>
    <div class="progress-container">
        <div class="progress-bar"></div>
    </div>
</header>


<style lang="scss">
    .chaos-header {
      position: fixed;
      top: 0;

      padding: 12px 0;
      
      z-index: 1;

      @keyframes grow-progress {
        from { transform: scaleX(0); }
        to { transform: scaleX(1); }
      }

      .progress-container {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 4px;
        background: var(--secondary);
        overflow: hidden;
      }

      .progress-bar {
        width: 100%;
        height: 100%;

        background: var(--primary);
        background-size: 35px 100%;

        transform-origin: left;

        animation: grow-progress auto linear forwards;

        animation-timeline: scroll(root), auto;
      }
    }

    .chaos-nav {
      display: flex;
      gap: 3px;

      a{
        display: flex;
        align-items: center;

        padding: 6px 12px;

        color: var(--primary);
        border-radius: 3px;
        border: 1px solid var(--border);
        background: var(--secondary);
        line-height: 1;

        backdrop-filter: blur(4px);
        
        transition: all 0.2s;

        &.active, &:hover{
          color: var(--secondary);
          background: var(--primary);
        }

        &:hover{
          opacity: 0.8;
        }
      }
    }
    
    @media (max-width: 768px) {
      .chaos-header{
        left: 0;
        
        width: 100%;
        
        background: var(--secondary);
        backdrop-filter: blur(4px);

        .progress-bar {
          display: block;
        }
      }
      
      .chaos-nav{
        justify-content: space-between;
        gap: 3px;
        
        padding: 0 12px;
        
        a{
          padding: 0;
          border: none;
          background: none;
          backdrop-filter: unset;
        }
      }
    }
</style>
